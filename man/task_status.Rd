% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/admin_ops.R
\name{task_status}
\alias{task_status}
\alias{task_status_show}
\alias{task_status_update}
\alias{task_status_update_many}
\alias{task_status_delete}
\title{CKAN task status maintenance}
\usage{
task_status_show(
  id = NULL,
  entity_id = NULL,
  entity_type = NULL,
  task_type = NULL,
  task_key = NULL,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)

task_status_update(
  id = NULL,
  entity_id = NULL,
  entity_type = NULL,
  task_type = NULL,
  task_key = NULL,
  value = NULL,
  state = NULL,
  last_updated = NULL,
  error = NULL,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)

task_status_update_many(
  data,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)

task_status_delete(
  id = NULL,
  entity_id = NULL,
  entity_type = NULL,
  task_type = NULL,
  task_key = NULL,
  url = get_default_url(),
  key = get_default_key(),
  as = "list",
  ...
)
}
\arguments{
\item{id}{(character) Task status identifier to inspect or mutate.}

\item{entity_id}{(character) ID of the dataset/resource related to the task.}

\item{entity_type}{(character) CKAN domain object type (e.g., "dataset").}

\item{task_type}{(character) Task namespace such as "datapusher".}

\item{task_key}{(character) Additional task key (e.g., queue name).}

\item{url}{Base url to use. Default: https://data.ontario.ca/ See
also \code{\link{ckanr_setup}} and \code{\link{get_default_url}}.}

\item{key}{A privileged CKAN API key, Default: your key set with
\code{\link{ckanr_setup}}}

\item{as}{(character) One of list (default), table, or json. Parsing with
table option uses \code{jsonlite::fromJSON(..., simplifyDataFrame = TRUE)},
which attempts to parse data to data.frame's when possible, so the result
can vary from a vector, list or data.frame. (required)}

\item{...}{Curl args passed on to \code{\link[crul]{verb-POST}} (optional)}

\item{value}{(character) Free-form value, often notes or payload references.}

\item{state}{(character) Task state such as "queued", "running", or
"finished".}

\item{last_updated}{(character) Timestamp string for the last state change.}

\item{error}{(character) Optional serialized error blob attached to the task.}

\item{data}{(list) For \code{task_status_update_many()}, a list of task status
dictionaries to update.}
}
\description{
These helpers wrap the sysadmin-only task status endpoints that CKAN uses to
track background operations (eg DataPusher runs).
}
\examples{
\dontrun{
ckanr_setup(url = "https://demo.ckan.org/", key = "my-ckan-key")
task_status_show(entity_type = "dataset", entity_id = "my-dataset")
task_status_update(
  entity_id = "my-dataset",
  entity_type = "dataset",
  task_type = "datapusher",
  task_key = "default",
  value = "queued",
  state = "running"
)
}
}
